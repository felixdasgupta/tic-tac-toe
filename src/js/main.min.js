"use strict";var tableStr1="ui sortable celled table",strictIsoParse=d3.time.format("%Y-%m-%dT%H:%M:%S.%LZ"),loadingData='<div class="aic_loading"><img src="'+window.loadingIcon+'" alt="" /></div>',DV01={opts:{alldata:[],container:"view",dataPath:"./src/data/articles.csv"},config:{},setOpts:function(){this.opts=$.extend({},this.opts,this.config)},extractData:function(t,e,n,i,a,r){var s=this.processTableData;d3.csv(t,function(t){new DVO1_X(i,t,e,s).drawTable(tableStr1,n),DV01.buildCharts(t)})},processTableData:function(t){return _.map(t,function(t){return{"User Type":t.user_type,"Article ID":t.article_id,"Article Type":t.article_type,Headline:t.content,Outcome:t.outcome,Sentiment:t.label,Confidence:t.confidence}})},buildCharts:function(t){var e=this.processBars(t);this.drawBars("chart1",e);var n=this.processPie1(t);this.drawPieA("chart2",n);var i=this.processPie2(t);this.drawPieB("chart3",i)},processBars:function(t){var e=["A"],n=["B"],i=["xA"],a=["xB"];return _.each(t,function(t){2==t.user_type?(e.push(t.sentiment),i.push(t.confidence)):(n.push(t.sentiment),a.push(t.confidence))}),[e,i,n,a]},drawBars:function(t,e){this.barChart=c3.generate({bindto:"#"+t,data:{xs:{A:"xA",B:"xB"},columns:e,type:"scatter"},tooltip:{format:{name:function(t,e,n,i){return t},value:function(t,e,n,i){return t}}},axis:{y:{label:"Sentiment"},x:{label:"Confidence",tick:{fit:!1}}}})},processPie1:function(t,e){var n=_.groupBy(t,function(t){return t.user_type});_.size(n[0],function(t){return t[e]}),_.size(n[1],function(t){return t[e]});return[["A",1217],["B",1217]]},drawPieA:function(t,e){c3.generate({bindto:"#"+t,data:{columns:e,type:"pie"}})},processPie2:function(t,e){var n=_.groupBy(t,function(t){return t.outcome});return[["Likes",_.size(n[0],function(t){return t[e]})],["Dislikes",_.size(n[1],function(t){return t[e]})]]},drawPieB:function(t,e){c3.generate({bindto:"#"+t,data:{columns:e,type:"pie"}})},startExp:function(){this.extractData(this.opts.dataPath,"Articles","tables","_table",[],[])},init:function(){this.setOpts(),this.startExp()}};DV01.init();var UX={opts:{},config:{},setOpts:function(){this.opts=$.extend({},this.opts,this.config)},init:function(){this.setOpts(),$("#continue").fadeOut(),$("#article").hide(),$("#SAM").show()},generate:function(){$("#ABTesting").show()}};$("#continue").on("click",function(){UX.init()}),$("#generate").on("click",function(){UX.generate()});var format=d3.time.format("%Y"),yaxis=d3.format(",");function DVO1_X(t,e,n,i){var a=i(e);this.id=t,this.data=a,this.columns=_.keys(a[0]),this.name=n}function createHeader(t,e){var n=t.find("tr");e.forEach(function(t){n.append("<th>"+t+"</th>")})}function createBody(t){var e=_.values(t),n="";return e.forEach(function(t){n+="<td>"+t+"</td>"}),n}function headingHTML(t,e){t.split(" ").join("_").toLocaleLowerCase();return'<div class="row">\n        <div class="ui stackable two column grid left floated">\n            <div class="ui column">\n                <div class="table_header">\n                </div>\n            </div>\n        </div>\n    </div>'}function headerTable(t,e,n){var i=headingHTML(e,n);$("#"+t).before(i)}DVO1_X.prototype.drawTable=function(t,e){var n=this.id,i=this.data,a=this.columns;this.name;$("#"+e).append('<table id="'+n+'" class="ui '+t+'"><thead><tr></tr></thead><tbody></tbody><tfoot><tr></tr></tfoot></table>');var r=$("#"+n),s=r.find("thead"),o=r.find("tbody");r.find("tfoot");createHeader(s,a);a.length;i.forEach(function(t){var e=createBody(t);o.append("<tr>"+e+"</tr>")}),$("table").tablesort(),$("#"+n).DataTable()};